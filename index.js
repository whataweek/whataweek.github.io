!function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const a={listeners:[],state:{type:"default",today:"",vacation:{vacationRange:"",studyRange:""},weekend:{isEven:!1,range:"",nextRange:""},default:{isEven:!1,range:""}},setType(e){this.state.type=e},setToday(e){this.state.today=e},update(e,t){this.state[this.state.type][e]=t,this.listeners.forEach(e=>e(this.state,this.state[this.state.type]))},subscribe(e){this.listeners.push(e)}},s=(e,t)=>`<div class="block">\n    <div class="block__date">${e}</div>\n    <div class="block__state">${(e=>e?'<span class="blue">четная</span>':'<span class="red">Нe</span><span class="blue">четная</span>')(t)}</div>\n  </div>`;let r="";const o=e=>({type:t,today:n},a)=>{let o=`<p>Сегодня <b>${n}</b></p>`;"vacation"===t&&(o+=(e=>`\n  <div class="block">\n    <div class="block__date">${e}</div>\n    <div class="block__state / blue">отдых</div>\n  </div>`)(a.vacationRange)+s(a.studyRange,!1)),"weekend"===t&&(o+=s(a.range,a.isEven)+s(a.nextRange,!a.isEven)),"default"===t&&(o+=s(a.range,a.isEven)),r!==o&&(r=o,e.innerHTML=o)},u=e=>{const t=e.getDay()-1;return-1===t?6:t},i=e=>e%2==0,c=e=>{const t=(e=>{const t=e.getFullYear(),n=e.getMonth(),a=e.getDate(),s=u(e);return new Date(t,n,a+(7-s))})((e=>{const t=e.getFullYear(),n=new Date(t,8,1),a=new Date(t-1,8,1);return e<n?a:n})(e));return e.valueOf()<t.valueOf()?1:t.valueOf()===e.valueOf()?2:1+Math.ceil((e-t)/6048e5)},l=e=>{const t=e.getFullYear(),n=e.getMonth(),a=e.getDate(),s=u(e);return[new Date(t,n,a-s),new Date(t,n,a+6-s)]},d=e=>{const t=e.getFullYear(),n=e.getMonth(),a=e.getDate()+7,s=u(e);return[new Date(t,n,a-s),new Date(t,n,a+6-s)]},p=e=>{const t=e.getFullYear(),n=new Date(t,8,1),a=new Date(t+1,8,1),s=e<n?n:a;if(6===u(s)){const e=s.getFullYear(),t=s.getMonth(),n=s.getDate()+1;return new Date(e,t,n)}return s},g=e=>{const t=e.getFullYear(),n=e.getMonth(),a=e.getDate(),s=u(e);return new Date(t,n,a+(6-s))},h=e=>0===e?"января":1===e?"февраля":2===e?"марта":3===e?"апреля":4===e?"мая":5===e?"июня":6===e?"июля":7===e?"августа":8===e?"сентября":9===e?"октября":10===e?"ноября":11===e?"декабря":void 0,v=e=>{return{year:e.getFullYear(),month:e.getMonth(),date:e.getDate()}},f=([e,t])=>{const n=v(e),a=v(t);if(n.month===a.month)return`${n.date} — ${a.date} ${h(a.month)}`;return`${`${n.date} ${h(n.month)}`} — ${`${a.date} ${h(a.month)}`}`},y=e=>{const t=e.getMonth();return`до ${e.getDate()} ${h(t)}`},D=e=>{const t=e.getDate(),n=e.getMonth();return`${t} ${h(n)}`};new class{constructor(e){this.$el=e;const t=o(this.$el);a.subscribe(t),this.update(),setInterval(this.update.bind(this),1e3)}update(){const e=new Date,t=this.getType(e);c(e),a.setType(t),a.setToday(D(e)),"vacation"===t&&this.updateVacation(e),"weekend"===t&&this.updateWeekend(e),"default"===t&&this.updateDefault(e)}updateDefault(e){const t=c(e);a.update("isEven",i(t)),a.update("range",f(l(e)))}updateWeekend(e){const t=c(e);a.update("isEven",i(t)),a.update("range",f(l(e))),a.update("nextRange",f(d(e)))}updateVacation(e){const t=p(e),n=g(t);a.update("vacationRange",y(t)),a.update("studyRange",f([t,n]))}getType(e){const t=c(e),n=u(e)>=5;return t>46?"vacation":n?"weekend":"default"}}(document.querySelector(".js-blocks"))}]);